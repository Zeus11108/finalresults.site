<!DOCTYPE html>
<html lang="ar" dir="rtl">
<!-- Mirrored from finalresults.nec.gov.ly/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 08 Aug 2025 11:05:06 GMT -->
<head><meta charset="utf-8">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!--<base href="/">-->
        <link rel="icon" type="image/png" href="NEC.Logo.png">
        <link rel="preconnect" href="https://fonts.googleapis.com/">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Zain:ital,wght@0,200;0,300;0,400;0,700;0,800;0,900;1,300;1,400&amp;display=swap" rel="stylesheet">
        <script src="../code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
        <!--<script src="jquery-3.7.1.min.js" crossorigin="anonymous"></script>-->
        <!-- <script src="https://cdn.cloudmersive.com/jsclient/cloudmersive-document-convert-client.js"></script> -->
        <script src="../cdn.jsdelivr.net/npm/imagejextension%400.3.1/src/lib/tiff/tiff.min.js"></script>
        <title>النتائج - المركز الوطني للامتحانات</title></head>
        <style>
            body {
                background-color: ivory;
                font-family: "Zain", sans-serif;
                font-weight: 400;
                font-style: normal;
                font-size: 16px;
                direction: rtl;
                color: #666;
                margin: 0;
                padding: 20px;
            }
            a:link, a:visited, a:active { color: #114e9e;}
            a:hover { color: #b46000;}
            .h {
                margin-top: .2rem;
                margin-bottom: .2rem;
            }
            h2 {
                font-size: 1.8rem;
            }
            h4 {
                font-size: 1.25rem;
            }
            h5 {
                font-size: 1.3rem;
            }
            header, footer {
                width: 100%;
                border: 1px solid #ccc;
                box-sizing: border-box;
                padding: .4rem .8rem;
                text-align: center;
                margin: auto;
            }
            header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                flex-wrap: wrap;
            }
            div.col1, div.col2, div.col3 {
                flex: 1 1 100%;
                text-align: center;
                margin-bottom: 10px;
            }
            div.col1 {
                text-align: right;
            }
            div.col2 {
                text-align: center;
            }
            div.col3 {
                text-align: left;
            }
            input, button {
                font-family: "Zain", sans-serif;
                margin-bottom: 10px;
                padding: .375rem .75rem;
                font-size: 1rem;
                font-weight: 400;
                line-height: 1.5;
                border: 1px solid #ccc;
                border-radius: 5px;
                width: 100%;
                max-width: 200px;
                box-sizing: border-box;
            }
            button {
                color: white;
                background-color: #0b5ed7;
                cursor: pointer;
            }
            button:hover {
                background-color: #0a4aa8;
            }
            button:disabled,
                button[disabled]{
                border: 1px solid #999999;
                background-color: #cccccc;
                color: #666666;
            }

            footer {
                margin-top: 20px;
                font-size: 14px;
            }

            /* Media Queries for larger screens */
            @media (min-width: 768px) {
                div.col1 {
                    flex: 0 0 20%;
                }
                div.col2 {
                    flex: 0 0 60%;
                }
                div.col3 {
                    flex: 0 0 20%;
                }
                header {
                    text-align: initial;
                }
            }

            /* توسيط الأعمدة عموديًا في الشاشات الصغيرة */
            @media (max-width: 767px) {
                header .col1,
                header .col2,
                header .col3,
                footer span {
                    text-align: center !important;
                }

                header, footer {
                    flex-direction: column;
                    align-items: center;
                }
            }
            .dataTable {
                color: #333;
                width: 100%;
                margin-bottom: 1rem;
                vertical-align: top;
                border-spacing: 0;
                border-collapse: collapse;
            }
            .dataTable th, .dataTable td {
                border: 1px solid #ccc;
                text-align: center;
                padding: 0 5px 0 5px;
            }
            /* .dataTable th {
                background-color: #fffac9;
            }
            .dataTable tr:nth-child(even) {
                background-color: #f1f0e7;
            } */
            td.rightAlign, th.rightAlign {
                text-align: right;
            }
            td.leftAlign, th.leftAlign {
                text-align: left;
            }
            .red {
                color: #c30000;
            }
            .greenBorder td, .greenBorder th {
                border-color: #00ae37;
            }
            .redBorder td, .redBorder th {
                border-color: #c30000;
            }



            #overlay {
                position: fixed;
                top: 0; left: 0; right: 0; bottom: 0;
                background: rgba(0, 0, 0, 0.6);
                display: none;
                z-index: 999;
            }

            #modal {
                position: fixed;
                top: 0;
                left: auto;
                /* transform: translate(-50%, -50%); */
                border-radius: 10px;
                max-width: 100vw;
                max-height: 100vh;
                width: 100vw;
                height: 100vh;
                box-sizing: border-box;
                overflow-y: hidden;
                z-index: 1000;
                display: none;
                /* box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3); */
            }

            #modal-content {
                position: fixed;
                top: 38px; left: 0; right: 0; bottom: 0;
            }
            .popupButtonsBar {
                background-color: #333;
                width: 100%;
                height: 38px;
                position: fixed;
                top: 0;
                left: 0;
                direction: ltr;
                padding: 5px;
                z-index: 100000;
            }
            .popupButtons {
                width: auto;
                float: left;
                background: #0b5ed7;
                color: white;
                border: none;
                padding: 0.4rem 0.8rem;
                border-radius: 4px;
                font-size: 0.9rem;
                cursor: pointer;
                margin-inline-end: 10px;
                font-weight: bold;
            }
            .popupButtons:hover {
                background: #0a4aa8;
            }
            #shiftButtons {
                padding-right: 10px;
                color: #fff;
                float: right;
            }
            #closePopup {
                background-color: #cf5c5c;
            }
            #closePopup:hover {
                background-color: #9c3333;
            }

            @keyframes flickerAnimation {
                0%   { opacity:1; }
                50%  { opacity:0; }
                100% { opacity:1; }
            }
            @-o-keyframes flickerAnimation{
                0%   { opacity:1; }
                50%  { opacity:0; }
                100% { opacity:1; }
            }
            @-moz-keyframes flickerAnimation{
                0%   { opacity:1; }
                50%  { opacity:0; }
                100% { opacity:1; }
            }
            @-webkit-keyframes flickerAnimation{
                0%   { opacity:1; }
                50%  { opacity:0; }
                100% { opacity:1; }
            }
            .loading {
                -webkit-animation: flickerAnimation 1s infinite;
                -moz-animation: flickerAnimation 1s infinite;
                -o-animation: flickerAnimation 1s infinite;
                animation: flickerAnimation 1s infinite;
                display: none;
            }



        </style>

    </head>
    <body>
        <header>
            <div class="col1">
                <h4 class="h">دولة ليبيا</h4>
                <h5 class="h">وزارة التربية والتعليم</h5>
                <h5 class="h">المركز الوطني للامتحانات</h5>
            </div>
            <div class="col2">
                <h2 class="h">خدمة الاستعلام عن نتائج امتحانات الشهادات العامة</h2>
                <h4 class="h">للعام الدراسي 1446-1447 هـ . الموافق 2024-2025 م.</h4>
            </div>
            <div class="col3">
                <img src="NEC.Logo.png" height="100px">
            </div>
        </header>
        <br>
        <main>
            <article>
                <p>يرجى إدخال رقم القيد والنقر على زر "عرض النتيجة":</p>
                <form id="queryForm" method="post" class="align-bottom" action="https://finalresults.nec.gov.ly/">
                    <input type="text" id="studentId" placeholder="أدخل رقم القيد" name="studentBasicInfo.studentIdStr" value="" />
                    <button type="submit" id="getResults">عرض النتيجة</button>
                </form>
            </article>
            <br>
            <div class="loading">تحميل ...</div>
            <article id="dataView"></article>
        </main>
        <footer>
            <span>تنفيذ شركة الشاطئ لنظم المعلومات</span>
            &nbsp; | &nbsp;
            <span>&copy; 2025 جميع الحقوق محفوظة</span>
            &nbsp; | &nbsp;
            <span id="timeView" dir="rtl"></span>
            &nbsp; | &nbsp;
            <span id="serverIPView" dir="rtl"></span>
        </footer>

        <div id="overlay"></div>
        <div id="modal">
            <div class="popupButtonsBar" id="popupButtonsBar">
                <button id="closePopup" title="إغلاق الصورة" class="popupButtons">X</button>

                <span id="shiftButtons">
                    إزاحة الخلفية
                    <button id="upMove" title="أعلى" class="popupButtons" data-control="shift">˄</button>
                    <button id="bottomMove" title="أسفل" class="popupButtons" data-control="shift">˅</button>
                    <button id="leftMove" title="يسار" class="popupButtons" data-control="shift">˂</button>
                    <button id="rightMove" title="يمين" class="popupButtons" data-control="shift">˃</button>
                </span>

            </div>
            <br>
            <div id="modal-content"><iframe style="width: 100%; height: 100%; overflow: hidden;" id="imageFrame" src="#"></iframe></div>
        </div>
    </body>
    <script>
        var req_timeout = 5000; horz = 0, vert = 0;

        window.onload = function() {

            $('#queryForm').on('submit', function(e) {
                
                $('[type="submit"]').prop('disabled', true);
                setTimeout(function() {
                    $('[type="submit"]').prop('disabled', false);
                }, req_timeout); // 5 seconds 
                e.preventDefault();
                $('#dataView').html('');
                $('.loading').show();

                var studentId = $('#studentId').val();

                $.ajax({
                    url: '/api/fResult',//2917182
                    // url:'real.json',
                    // url: 'https://finalresults.nec.gov.ly/api/fResult',
                    timeout: req_timeout,
                    crossDomain:true,
                    method: 'GET',
                    contentType: "application/json; charset=utf-8", // Indicate that you are sending JSON
                    dataType: "json", // Indicate that you expect JSON back
                    data: { studentId: studentId },
                    success: function(response) {
                        // console.log(response);
                        // console.log(response.data);
                        //const jsonData = JSON.parse(response);
                        const resultSummery = response.data[0].ResultSummary;
                        const SubjectDetails = response.data[0].SubjectDetails;
                        if (!response || $.isEmptyObject(response)) {
                            $('#dataView').html('<p>لم يتم العثور على بيانات الطالب.</p>');
                            return;
                        }
                        else if($.isEmptyObject(resultSummery) || SubjectDetails.length === 0) {
                            $('#dataView').html('<p>لم يتم العثور على بيانات الطالب.</p>');
                            return;
                        }
                        $('#timeView').html('التوقيت: ' + resultSummery.serverTimestamp.replace("T", " "));
                        renderStudentData(response);
                        $('.loading').hide();
                        $('[type="submit"]').prop('disabled', false);
                    },
                    error: function() {
                        $('#dataView').html(`<p>لم يتم العثور على معلومات الطالب.</p>`);
                        $('.loading').hide();
                        $('[type="submit"]').prop('disabled', false);
                    }
                });
            });


            function renderStudentData(jsonData) {
                const resultSummery = jsonData.data[0].ResultSummary;
                const SubjectDetails = jsonData.data[0].SubjectDetails;
                let html = ``;

                if(resultSummery.matriculationTypeCode == 400)
                    resultSummery.matriculationTypeDesc = resultSummery.matriculationTypeDesc + "(" + resultSummery.retakeBaseMatriculationDesc + " - " + resultSummery.retakeBaseAcademicYear + ")";

                let studentInfoTable = `
                    <table class="dataTable" border="1" cellspacing="0" cellpadding="5">
                        <thead>
                            <tr>
                                <th>رقم القيد</th>
                                <th width="60%">اسم الطالب</th>
                                <th width="25%">صفة القيد</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>${resultSummery.studentId}</td>
                                <td>${resultSummery.studentNameAr}</td>
                                <td>${resultSummery.matriculationTypeDesc}</td>
                            </tr>
                        </tbody>
                    </table>
                `;

                // Subjects table
                subjectsTable = `
                    <table class="dataTable" border="1" cellspacing="0" cellpadding="5">
                        <thead>
                            <tr>
                                <th>ر.م.</th>
                                <th>المادة</th>
                                <th>درجة الامتحان</th>
                                <th>درجات <br> إضافية</th>
                                <th>الامتحان النهائي</th>
                                <th>درجة النجاح في <br> الامتحان النهائي</th>
                                <th>الامتحان المدرسي<br>(ضمن درجة الامتحان)</th>
                                <th>أعمال السنة</th>
                                <th>المجموع</th>
                                <th>درجة النجاح <br> في المادة</th>
                                <th>الاحتياج للنجاح</th>
                                <th>نتيجة المادة</th>
                                <th>أوراق الإجابة</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{tbody}}
                        </tbody>
                    </table>
                `;

                let tbody = ``;
                let tbodyExc =``;
                let tr;
                let examAnswerSheet = '';
                resultSummery.maxGradePoints = 0;
                displaySeqNo = 0;
                $.each(SubjectDetails, function(i, subject) {
                    tr = `<tr>`;
                    tr += `<td>${subject.displaySeqNo}</td>`;
                    tr += `<td>${subject.subjDescAr}</td>`;
                            
                    if(subject.exemptFlag)
                        tr += `<td colspan="9"></td>`;
                    else {
                        tr += `<td>${(subject.finalExamGrade - subject.examExtraPoints)}</td>`;
                        tr += `<td>${(subject.examExtraPoints) || ''}</td>`;

                        textClass = '';
                        if(subject.finalExamFailedFlag)
                            textClass = 'red';

                        tr += `<td class="${textClass}">${subject.finalExamGrade.toFixed(2)} / ${subject.totalExamPoints.toFixed(2)}</td>`;
                        tr += `<td>${subject.finalExamPassGrade.toFixed(2)}</td>`;
                        tr += `<td>${subject.practicalExamGradeStr}</td>`;

                        if(subject.matriculationTypeCode == 200 || (subject.matriculationTypeCode == 400 && subject.retakeBaseMatriculation == 200))
                            tr += `<td></td>`;
                        else
                            tr += `<td>${subject.YearlyAchievmentGrade} / ${subject.yprsTotalPoints}</td>`;

                        if(subject.finalExamFailedFlag)
                            tr += `<td></td>`;
                        else {
                            textClass = '';
                            if(subject.subjectFailedFlag)
                                textClass = 'red';
                                tr += `<td class="${textClass}">${subject.totalSubjectGrade.toFixed(2)} / ${subject.totalSubjectPoints.toFixed(2)}</td>`;
                        }
                        tr += `<td>${subject.passGrade.toFixed(2)}</td>`;

                        if(subject.requiredExtraPoints > 0)
                            tr += `<td>${subject.requiredExtraPoints} (${subject.requiredExtraPercentage.toFixed(2)} %)</td>`;
                        else
                            tr += `<td></td>`;

                    }

                    if(subject.exemptFlag)
                        tr += `<td>معفي</td>`;
                    else {
                            // console.log(subject);
                                if(resultSummery.hasMakeupFlag && subject.subjectFailedFlag)
                                    tr += `<td>دور ثانٍ</td>`;
                                else if(resultSummery.hasMakeupFlag && subject.subjectFailedFlag)
                                    tr += `<td>راسب</td>`;
                                else if(!subject.subjectFailedFlag)
                                    tr += `<td>ناجح</td>`;
                                else
                                    tr += `<td>غير محددة</td>`;
                    }

                    
                    if(subject.assdIdentRec) {
                        examAnswerSheet = `<a class="openPopup" href="ExamAnswerSheet7195.html?dataRecId=${subject.assdIdentRec}">${subject.examDesc}</a>`;
                        $.each(SubjectDetails, function(j, subject2) {
                            if (j <= i) return;
                            if(subject2.displaySeqNo != subject.displaySeqNo) return;
                            else
                                examAnswerSheet += ` | <a class="openPopup" href="ExamAnswerSheetf6ff.html?dataRecId=${subject2.assdIdentRec}">${subject2.examDesc}</a>`;
                            
                        });
                        // subject.displaySeqNo != displaySeqNo
                        tr += `<td>${examAnswerSheet}</td>`;
                    }
                    else
                        tr += `<td></td>`;
                    
                    tr += `</tr>`;
                    
                    if(subject.exludeFromGPA)
                        tbodyExc += tr;
                    else if(subject.displaySeqNo != displaySeqNo) {
                        tbody += tr;
                        resultSummery.maxGradePoints = resultSummery.maxGradePoints + subject.maxGradePoints;
                    }

                    displaySeqNo = subject.displaySeqNo;
                });

                if(resultSummery.gradeDesignationCode >= 100 && resultSummery.gradeDesignationCode <= 400 && resultSummery.passedFlag && !resultSummery.failedFlag && !resultSummery.hasMakeupFlag)
                    borderClass = 'greenBorder';
                else
                    borderClass = 'redBorder';

                let summeryTable = `
                    <table class="dataTable ${borderClass}" border="1" cellspacing="0" cellpadding="5">
                        <tbody>
                            {{tbody}}
                        </tbody>
                    </table>
                `;
                
                let tbodySummery;
                if(resultSummery.gradeDesignationCode >= 100 && resultSummery.gradeDesignationCode <= 400 && resultSummery.passedFlag && !resultSummery.failedFlag && !resultSummery.hasMakeupFlag)
                    tbodySummery = `
                            <tr>
                                <th class="leftAlign">عدد المواد المقررة</th>
                                <td>${resultSummery.noOfSubjects}</td>
                                <th class="leftAlign">المجموع</th>
                                <td>${resultSummery.totalGradePoints} / ${resultSummery.maxGradePoints}</td>
                            </tr>
                            <tr>
                                <th class="leftAlign">عدد المواد الناجح فيها الطالب</th>
                                <td>${resultSummery.subjectsPassed}</td>
                                <th class="leftAlign">المعدل العام</th>
                                <td dir="rtl">${resultSummery.overallGradeAverage.toFixed(2)} %</td>
                            </tr>
                            <tr>
                                <th class="leftAlign">عدد المواد الراسب فيها الطالب</th>
                                <td>${resultSummery.subjectsFailed}</td>
                                <th class="leftAlign">نتيجة الطالب</th>
                                <td>ناجح بتقدير ${resultSummery.gradeDesignationDesc}</td>
                            </tr>
                    `;
                else
                    tbodySummery = `
                            <tr>
                                <th class="leftAlign">عدد المواد المقررة</th>
                                <td>${resultSummery.noOfSubjects}</td>
                                <th class="" rowspan="3" colspan="2">
                                    <strong>نتيجة الطالب</strong>
                                    <br>
                                    ${resultSummery.gradeDesignationDesc}
                                </th>
                            </tr>
                            <tr>
                                <th class="leftAlign">عدد المواد الناجح فيها الطالب</th>
                                <td>${resultSummery.subjectsPassed}</td>
                            </tr>
                            <tr>
                                <th class="leftAlign">عدد المواد الراسب فيها الطالب</th>
                                <td>${resultSummery.subjectsFailed}</td>
                            </tr>
                    `;
                
                html += studentInfoTable + subjectsTable.replace('{{tbody}}', tbody);

                html += summeryTable.replace('{{tbody}}', tbodySummery);
                if(tbodyExc)
                    html += subjectsTable.replace('{{tbody}}', tbodyExc);

                $('#dataView').html(html);
                $('#serverIPView').html(resultSummery.clientIP);

                if( examAnswerSheet == '' ) {
                    $('.dataTable td:nth-child(13)').hide();
                    $('.dataTable th:nth-child(13)').hide();
                }
                else {
                    $('.dataTable td:nth-child(13)').show();
                    $('.dataTable th:nth-child(13)').show();
                }
            }


            /////////////////////////////////////////////////////////////////
            // Open Popup image
            $(document).on('click', '.openPopup', function (e) {
                e.preventDefault();
                const url = $(this).attr('href');
                // View model and darkness
                $('#overlay, #modal').fadeIn();
                // loading content
                $('#imageFrame').attr('src', url);
                $("#popupButtonsBar").attr('data-link', url);
                $('#dataView').hide();
            });
            // Open Popup image
            /////////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////////
            // Close Popup image
            $('#closePopup, #overlay').on('click', function () {
                $('#overlay, #modal').fadeOut();
                $('#imageFrame').attr('src', ''); // إفراغ المحتوى إن أردت
                $('#dataView').show();
            });
            // Close Popup image
            /////////////////////////////////////////////////////////////////

            /////////////////////////////////////////////////////////////////
            // Image adjustment Control
            $(document).on('click', '*[data-control="shift"]', function (e) {
                e.preventDefault();
                let stepSize = 20;
                if( $(this).attr('id') == 'upMove' ) vert -= stepSize;
                if( $(this).attr('id') == 'bottomMove' ) vert += stepSize;
                if( $(this).attr('id') == 'rightMove' ) horz += stepSize;
                if( $(this).attr('id') == 'leftMove' ) horz -= stepSize;
                console.log( vert );
                console.log( horz );
                url = $("#popupButtonsBar").attr('data-link');
                //$('#modal-content').empty();
                $('#imageFrame').attr('src', url+'&horz='+horz+'&vert='+vert);
                // $('#modal-content').load(url+'&horz='+horz+'&vert='+vert);
                console.log( url+'&horz='+horz+'&vert='+vert );
            });
            // Image adjustment Control
            /////////////////////////////////////////////////////////////////

        };
    </script>

<!-- Mirrored from finalresults.nec.gov.ly/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 08 Aug 2025 11:05:08 GMT -->
</html>